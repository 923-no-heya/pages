<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>9 × 2 = 3 の部屋</title>
  <meta name="description" content="ある研究者のドキュメントを参照できるサイトです。" />
  <meta property="og:title" content="9 × 2 = 3 の部屋" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="ある研究者のドキュメントを参照できるサイトです。" />
  <meta property="og:image" content="" />
  <meta name="theme-color" content="#0ea5e9" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b1020;
      --panel:#0f172a;
      --ink:#e5e7eb;
      --muted:#9ca3af;
      --brand:#0ea5e9;
      --accent:#22d3ee;
      --ring: 0 0 0 3px color-mix(in oklab, var(--brand) 40%, transparent);
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --grid: minmax(240px,1fr);
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7fb;
        --panel:#ffffff;
        --ink:#0f172a;
        --muted:#6b7280;
        --brand:#0284c7;
        --accent:#06b6d4;
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 80% -10%, color-mix(in oklab, var(--brand) 20%, transparent), transparent 60%),
        radial-gradient(900px 500px at -10% 20%, color-mix(in oklab, var(--accent) 18%, transparent), transparent 60%),
        var(--bg);
      line-height:1.6;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px; margin:0 auto; padding:24px}
    header{
      position:sticky; top:0; z-index:30;
      backdrop-filter:saturate(140%) blur(10px);
      background: color-mix(in oklab, var(--bg) 82%, transparent);
      border-bottom:1px solid color-mix(in oklab, var(--panel) 70%, transparent);
    }
    .nav{
      display:flex; align-items:center; gap:16px;
      padding:12px 24px;
    }
    .brand{
      font-weight:800; letter-spacing:.02em; font-size:18px;
      display:flex; align-items:center; gap:10px;
    }
    .logo{
      width:28px; height:28px; border-radius:8px;
      background: conic-gradient(from 180deg at 50% 50%, var(--brand), var(--accent), var(--brand));
      box-shadow: var(--shadow);
    }
    .spacer{flex:1}
    .tabs{display:flex; gap:6px; flex-wrap:wrap}
    .tab{
      padding:8px 12px; border-radius:999px; font-weight:600;
      border:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      opacity:.9;
    }
    .tab[aria-current="page"]{outline: var(--ring); opacity:1; border-color: color-mix(in oklab, var(--brand) 40%, transparent)}
    .menuButton{display:none}
    @media (max-width:900px){
      .tabs{display:none}
      .menuButton{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:1px solid color-mix(in oklab, var(--ink) 12%, transparent)}
    }
    .drawer{
      position:fixed; inset:0 0 0 auto; width:min(86%,360px); transform:translateX(100%);
      background:var(--panel); box-shadow: var(--shadow); transition:.28s ease;
      display:flex; flex-direction:column; padding:20px; gap:10px; z-index:40;
    }
    .drawer.open{transform:translateX(0)}
    .drawer a{padding:10px 12px; border-radius:10px; border:1px solid color-mix(in oklab, var(--ink) 12%, transparent)}
    main{min-height:70vh}
    .hero{
      display:grid; grid-template-columns: 1.2fr 1fr; gap:24px;
      padding:48px 24px 16px;
      align-items:center;
    }
    .heroCard{
      background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 92%, transparent), color-mix(in oklab, var(--panel) 98%, transparent));
      border:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:28px;
    }
    .kicker{font-weight:700; color:var(--muted); text-transform:uppercase; letter-spacing:.12em; font-size:12px}
    h1{font-size: clamp(28px, 6vw, 48px); line-height:1.15; margin:6px 0 12px}
    .lead{font-size:18px; color:var(--muted)}
    .ctaRow{display:flex; gap:12px; margin-top:16px; flex-wrap:wrap}
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 16px; border-radius:12px; font-weight:700; letter-spacing:.02em;
      border:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      background: color-mix(in oklab, var(--panel) 86%, transparent);
    }
    .btn.primary{
      background: linear-gradient(135deg, var(--brand), var(--accent));
      color:#001018; border:none;
      box-shadow: 0 10px 30px color-mix(in oklab, var(--brand) 30%, transparent);
    }
    .grid{
      display:grid; gap:16px; grid-template-columns: repeat(3, var(--grid));
      padding:16px 0 40px;
    }
    @media (max-width:900px){ .hero{grid-template-columns:1fr} .grid{grid-template-columns: repeat(2, var(--grid));} }
    @media (max-width:600px){ .grid{grid-template-columns:1fr;} }
    .card{
      background:var(--panel); border-radius:var(--radius);
      border:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      box-shadow: var(--shadow);
      overflow:hidden; display:flex; flex-direction:column;
    }
    .cardHeader{
      padding:18px 18px 0; display:flex; align-items:center; gap:12px;
    }
    .chip{
      padding:6px 10px; font-weight:700; font-size:12px; border-radius:999px;
      background: color-mix(in oklab, var(--ink) 12%, transparent);
      color: color-mix(in oklab, var(--ink) 80%, transparent);
    }
    .cardTitle{font-size:20px; font-weight:800; line-height:1.2; margin:8px 0 0}
    .cardBody{padding:0 18px 18px; color:var(--muted)}
    .cardFooter{margin-top:auto; padding:14px 18px; border-top:1px solid color-mix(in oklab, var(--ink) 10%, transparent); display:flex; gap:8px; flex-wrap:wrap}
    .tag{font-size:12px; padding:6px 8px; border-radius:8px; border:1px dashed color-mix(in oklab, var(--ink) 20%, transparent)}
    .searchWrap{margin:8px 0 18px}
    .search{
      width:100%; padding:12px 14px; border-radius:12px; outline:none;
      border:1px solid color-mix(in oklab, var(--ink) 18%, transparent);
      background: color-mix(in oklab, var(--panel) 88%, transparent); color:var(--ink);
      box-shadow: inset 0 1px 0 color-mix(in oklab, var(--ink) 6%, transparent);
    }
    .list{display:grid; gap:12px; padding:8px 0 24px}
    .row{
      padding:14px; background: color-mix(in oklab, var(--panel) 92%, transparent);
      border:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      border-radius:12px; display:grid; gap:6px;
    }
    .rowTitle{font-weight:800}
    .rowMeta{font-size:12px; color:var(--muted)}
    article.article{
      background:var(--panel); border:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      border-radius:var(--radius); padding:24px; box-shadow: var(--shadow);
    }
    .breadcrumbs{font-size:12px; color:var(--muted); margin-bottom:10px}
    footer{
      border-top:1px solid color-mix(in oklab, var(--ink) 12%, transparent);
      color:var(--muted); padding:24px; text-align:center;
      background: color-mix(in oklab, var(--panel) 40%, transparent);
    }
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
  </style>
</head>
<body>
  <header>
    <nav class="nav container" aria-label="Primary">
      <a class="brand" href="#/">
        <span class="logo" aria-hidden="true"></span>
        <span>9 × 2 = 3 の部屋</span>
      </a>
      <div class="spacer"></div>
      <div class="tabs" role="tablist" aria-label="セクション">
        <a class="tab" data-nav href="#/" role="tab">トップ</a>
        <a class="tab" data-nav href="#/category/stat" role="tab">統計学</a>
        <a class="tab" data-nav href="#/category/math" role="tab">数学</a>
        <a class="tab" data-nav href="#/category/others" role="tab">その他の解析</a>
        <a class="tab" data-nav href="#/category/melas" role="tab">走れメラス</a>
        <a class="tab" data-nav href="#/category/memoir" role="tab">手記</a>
      </div>
      <button class="menuButton" id="menuBtn" aria-expanded="false" aria-controls="drawer">メニュー</button>
    </nav>
  </header>

  <aside id="drawer" class="drawer" aria-hidden="true" aria-label="モバイルメニュー">
    <a href="#/">トップ</a>
    <a href="#/category/stat">統計学</a>
    <a href="#/category/math">数学</a>
    <a href="#/category/others">その他の解析</a>
    <a href="#/category/melas">走れメラス</a>
    <a href="#/category/memoir">手記</a>
  </aside>

  <main id="app" class="container" tabindex="-1" aria-live="polite"></main>

  <footer>
    © <span id="year"></span> 9 × 2 = 3 の部屋 — ある研究者のドキュメントを参照できるサイトです。
  </footer>

  <script>
    // ====== コンテンツ（ここを書き換えるだけで運用できます） =========================
    const SITE = {
      title: "9 × 2 = 3 の部屋",
      tagline: "ある研究者のドキュメントを参照できるサイトです。",
      categories: [
        { key: "stat",   label: "統計学",          summary: "統計的推測・検定・多変量解析などの基礎から応用まで。", tags:["推測","検定","分布","回帰"] },
        { key: "math",   label: "数学",            summary: "線形代数・微積分・最適化など理論の土台。",           tags:["線形代数","解析","最適化"] },
        { key: "others", label: "その他の解析",    summary: "シミュレーション・数値計算・信号処理などの実践。",     tags:["数値計算","モデリング"] },
        { key: "melas",  label: "走れメラス",      summary: "比喩的エッセイ／研究の周辺にある断章。",             tags:["エッセイ"] },
        { key: "memoir", label: "手記",            summary: "研究メモ・日録・雑記。",                             tags:["メモ","日録"] },
      ],
      // 記事データ（必要に応じて増減・修正）
      articles: [
        // === 統計学 ===
        { id:"stat-001", category:"stat",  title:"統計学の序", date:"2025-04-01", description:"統計学の見取り図と本サイトにおける位置づけ。", body:`
          <p>統計学は「データから不確実性を伴いつつも合理的に結論を導く」ための学問です。本稿では推測・検定・推定の関係、そして本サイトの読み方を概説します。</p>
          <h3>この連載の狙い</h3>
          <ul>
            <li>数式の背後にある直観を獲得する</li>
            <li>実務で使う最小限の道具立てを持つ</li>
            <li>できれば楽しく読む</li>
          </ul>
        `},
        { id:"stat-010", category:"stat",  title:"母集団・標本・推定の基礎", date:"2025-04-12", description:"点推定と区間推定、標本分布の考え方。", body:"<p>...</p>"},
        // === 数学 ===
        { id:"math-001", category:"math",  title:"線形代数のゼロ章", date:"2025-04-05", description:"写像の目線で見る線形代数。", body:"<p>...</p>"},
        { id:"math-020", category:"math",  title:"最適化入門：凸最適化の直観", date:"2025-05-01", description:"ラグランジュ双対性のスケッチ。", body:"<p>...</p>"},
        // === その他の解析 ===
        { id:"others-001", category:"others", title:"数値積分の実務的コツ", date:"2025-05-20", description:"台形則から適応的手法まで。", body:"<p>...</p>"},
        // === 走れメラス ===
        { id:"melas-001", category:"melas", title:"研究は走る、しかし歩く", date:"2025-06-02", description:"急がば回れの技術。", body:"<p>...</p>"},
        // === 手記 ===
        { id:"memoir-001", category:"memoir", title:"2025年4月の記録", date:"2025-04-30", description:"今月の所感とメモ。", body:"<p>...</p>"},
      ]
    };

    // ====== ユーティリティ ======
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => [...el.querySelectorAll(sel)];
    const byId = id => SITE.articles.find(a => a.id === id);
    const catByKey = key => SITE.categories.find(c => c.key === key);

    // ====== ルーター（#/ , #/category/:key , #/article/:id） ======
    function route(){
      const hash = location.hash || "#/";
      const app = $("#app");
      const [_, root, p1] = hash.split("/"); // ["#","", ""] or ["#","category","stat"]...
      closeDrawer();

      // タブ状態の更新
      $$(".tab").forEach(t => t.setAttribute("aria-current", t.getAttribute("href") === hash ? "page" : "false"));

      if(root === "" || root === "#"){ renderHome(app); return; }
      if(root === "category" && p1){ renderCategory(app, p1); return; }
      if(root === "article" && p1){ renderArticle(app, p1); return; }
      renderNotFound(app);
    }

    // ====== ビュー ======
    function renderHome(app){
      app.innerHTML = `
        <section class="hero">
          <div class="heroCard">
            <span class="kicker">Welcome</span>
            <h1>${SITE.title}</h1>
            <p class="lead">${SITE.tagline}</p>
            <div class="ctaRow">
              <a class="btn primary" href="#/category/stat">はじめての方は「統計学」から</a>
              <a class="btn" href="#/category/math" aria-label="数学へ">数学へ</a>
            </div>
          </div>
          <div class="heroCard">
            <h2 style="margin:0 0 8px;font-size:22px">セクション一覧</h2>
            <p class="lead" style="font-size:14px">各カテゴリの「記事一覧」から読み進めてください。</p>
            <div class="grid" style="padding:8px 0 0">
              ${SITE.categories.map(c => CardCategory(c)).join("")}
            </div>
          </div>
        </section>
        <section class="grid">
          ${FeaturedCards()}
        </section>
      `;
      focusMain();
    }

    function CardCategory(c){
      return `
        <article class="card">
          <div class="cardHeader">
            <span class="chip">${c.label}</span>
            <span class="tag">${c.tags[0] ?? ""}</span>
          </div>
          <div class="cardBody">
            <h3 class="cardTitle">${c.label}</h3>
            <p>${c.summary}</p>
          </div>
          <div class="cardFooter">
            <a class="btn" href="#/category/${c.key}" aria-label="${c.label}の記事一覧へ">記事一覧へ</a>
          </div>
        </article>
      `;
    }

    function FeaturedCards(){
      // 各カテゴリの最新1件をピックアップ
      const latestByCat = SITE.categories.map(c => {
        const items = SITE.articles.filter(a => a.category === c.key)
          .sort((a,b) => b.date.localeCompare(a.date));
        return items[0] ? [c, items[0]] : null;
      }).filter(Boolean);

      return latestByCat.map(([c,a]) => `
        <article class="card">
          <div class="cardHeader">
            <span class="chip">${c.label}</span>
          </div>
          <div class="cardBody">
            <h3 class="cardTitle">${a.title}</h3>
            <p>${a.description}</p>
          </div>
          <div class="cardFooter">
            <span class="tag">更新日: ${a.date}</span>
            <a class="btn" href="#/article/${a.id}">読む</a>
          </div>
        </article>
      `).join("");
    }

    function renderCategory(app, key){
      const cat = catByKey(key);
      if(!cat){ renderNotFound(app); return; }
      const list = SITE.articles
        .filter(a => a.category === key)
        .sort((a,b) => b.date.localeCompare(a.date));

      app.innerHTML = `
        <section class="hero" style="grid-template-columns:1fr">
          <div class="heroCard">
            <span class="kicker">Category</span>
            <h1>${cat.label}</h1>
            <p class="lead">${cat.summary}</p>
            <div class="searchWrap">
              <label class="sr-only" for="q">検索</label>
              <input id="q" class="search" placeholder="この記事一覧を検索…" inputmode="search" />
            </div>
            <div id="list" class="list" role="list">
              ${list.map(Row).join("")}
            </div>
          </div>
        </section>
      `;
      $("#q").addEventListener("input", e => {
        const q = e.target.value.trim().toLowerCase();
        const filtered = list.filter(a =>
          a.title.toLowerCase().includes(q) || (a.description||"").toLowerCase().includes(q)
        );
        $("#list").innerHTML = filtered.map(Row).join("") || `<p class="rowMeta">該当する記事が見つかりませんでした。</p>`;
      });
      focusMain();
    }
    function Row(a){
      return `
        <a class="row" href="#/article/${a.id}" role="listitem">
          <div class="rowTitle">${a.title}</div>
          <div class="rowMeta">更新日: ${a.date}</div>
          <div>${a.description ?? ""}</div>
        </a>
      `;
    }

    function renderArticle(app, id){
      const a = byId(id);
      if(!a){ renderNotFound(app); return; }
      const cat = catByKey(a.category);
      app.innerHTML = `
        <nav class="breadcrumbs">
          <a href="#/">トップ</a> › <a href="#/category/${cat.key}">${cat.label}</a> › <span>${a.title}</span>
        </nav>
        <article class="article article">
          <header>
            <h1 style="margin:0 0 6px">${a.title}</h1>
            <div class="rowMeta">更新日: ${a.date}・カテゴリ: <a href="#/category/${cat.key}">${cat.label}</a></div>
          </header>
          <hr style="border:none; border-top:1px solid color-mix(in oklab, var(--ink) 14%, transparent); margin:16px 0">
          <section>${a.body}</section>
        </article>
      `;
      focusMain();
    }

    function renderNotFound(app){
      app.innerHTML = `
        <section class="hero" style="grid-template-columns:1fr">
          <div class="heroCard">
            <h1>ページが見つかりません</h1>
            <p class="lead">URLをご確認のうえ、トップにお戻りください。</p>
            <div class="ctaRow"><a class="btn primary" href="#/">トップへ戻る</a></div>
          </div>
        </section>
      `;
      focusMain();
    }

    function focusMain(){ $("#app").focus({preventScroll:true}); }

    // ====== ナビ（モバイルドロワー） ======
    const drawer = $("#drawer");
    const menuBtn = $("#menuBtn");
    const openDrawer = () => {
      drawer.classList.add("open");
      drawer.setAttribute("aria-hidden","false");
      menuBtn.setAttribute("aria-expanded","true");
    }
    const closeDrawer = () => {
      drawer.classList.remove("open");
      drawer.setAttribute("aria-hidden","true");
      menuBtn.setAttribute("aria-expanded","false");
    }
    menuBtn.addEventListener("click", () => {
      const open = drawer.classList.contains("open");
      open ? closeDrawer() : openDrawer();
    });
    drawer.addEventListener("click", e => {
      if(e.target.tagName === "A") closeDrawer();
    });

    // ====== 起動 ======
    window.addEventListener("hashchange", route);
    window.addEventListener("DOMContentLoaded", () => {
      route();
      $("#year").textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>
